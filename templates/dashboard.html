{% extends "base.html" %}

{% block title %}Dashboard - Alpha Nex{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h1>Welcome, {{ demo_user.name if demo_user else 'Demo User' }}</h1>
    <p>Your XP: {{ demo_user.xp_points if demo_user else 500 }} points</p>
</div>

<!-- Strike Warnings -->
{% if demo_user and (demo_user.uploader_strikes > 0 or demo_user.reviewer_strikes > 0) %}
<div class="alert alert-warning">
    <strong>Strike Warning:</strong>
    {% if demo_user.uploader_strikes > 0 %}
    Uploader: {{ demo_user.uploader_strikes }}/3 strikes
    {% endif %}
    {% if demo_user.reviewer_strikes > 0 %}
    Reviewer: {{ demo_user.reviewer_strikes }}/3 strikes
    {% endif %}
</div>
{% endif %}

<!-- Stats -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
    <div class="card">
        <div class="card-header">Total Uploads</div>
        <div class="card-body">{{ upload_count }}</div>
    </div>
    <div class="card">
        <div class="card-header">Reviews Completed</div>
        <div class="card-body">{{ review_count }}</div>
    </div>
    <div class="card">
        <div class="card-header">Pending Reviews</div>
        <div class="card-body">{{ pending_reviews }}</div>
    </div>
</div>

<!-- Quick Actions -->
<div style="margin: 2rem 0;">
    <h2>Quick Actions</h2>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{{ url_for('upload_file') }}" class="btn btn-primary">Upload File</a>
        <a href="{{ url_for('review_content') }}" class="btn">Review Content</a>
        <a href="{{ url_for('leaderboard') }}" class="btn">View Leaderboard</a>
        <a href="{{ url_for('profile') }}" class="btn">My Profile</a>
    </div>
</div>

<!-- Recent Activity -->
<div style="margin: 2rem 0;">
    <h2>Recent Uploads</h2>
    {% if recent_uploads %}
    <table class="table">
        <thead>
            <tr>
                <th>Filename</th>
                <th>Category</th>
                <th>Upload Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for upload in recent_uploads %}
            <tr>
                <td>{{ upload.filename }}</td>
                <td>{{ upload.category }}</td>
                <td>{{ upload.upload_date.strftime('%Y-%m-%d') }}</td>
                <td>{{ upload.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No uploads yet. <a href="{{ url_for('upload_file') }}">Upload your first file</a></p>
    {% endif %}
</div>
{% endblock %}